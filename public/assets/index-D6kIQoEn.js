import{r as c,j as e,B as l,c as n}from"./index-BhYYepx0.js";import{d as u}from"./dayjs.min-DpXdlbGp.js";import{S as I}from"./separator-BsIISvc0.js";import{A as f,a as p,b as g}from"./avatar-Dh8D-3y6.js";import{L as d}from"./layout-ClA9vLbp.js";import{S as C}from"./search-DAXImOlQ.js";import{T as Y}from"./theme-switch-15d-WzbI.js";import{U as M}from"./user-nav-ycJlDfKr.js";import{c as j,I as L,a as _,b as A,d as P,e as B,f as T,g as U,h as $,i as E,j as F,k as N}from"./conversations-BJDD7bwx.js";import"./input-h4dMutmH.js";import"./index-DGK-_Q08.js";import"./index-Cn4qTzT2.js";import"./Combination-D8vam8uf.js";import"./index-BJG12cgo.js";import"./tslib.es6-CDuPK5Eb.js";import"./firebase-B2yorLdJ.js";function le(){const[m,v]=c.useState(""),[t,w]=c.useState(j[0]),[b,x]=c.useState(null),y=j.filter(({fullName:s})=>s.toLowerCase().includes(m.trim().toLowerCase())),i=t.messages.reduce((s,a)=>{const r=u(a.timestamp).format("D MMM, YYYY");return s[r]||(s[r]=[]),s[r].push(a),s},{});return e.jsxs(d,{fixed:!0,children:[e.jsxs(d.Header,{children:[e.jsx(C,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(Y,{}),e.jsx(M,{})]})]}),e.jsx(d.Body,{className:"sm:overflow-hidden",children:e.jsxs("section",{className:"flex h-full gap-6",children:[e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-56 lg:w-72 2xl:w-80",children:[e.jsxs("div",{className:"sticky top-0 z-10 -mx-4 bg-background px-4 pb-3 shadow-md sm:static sm:z-auto sm:mx-0 sm:p-0 sm:shadow-none",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Inbox"}),e.jsx(L,{size:20})]}),e.jsx(l,{size:"icon",variant:"ghost",className:"rounded-lg",children:e.jsx(_,{size:24,className:"stroke-muted-foreground"})})]}),e.jsxs("label",{className:"flex h-12 w-full items-center space-x-0 rounded-md border border-input pl-2 focus-within:outline-none focus-within:ring-1 focus-within:ring-ring",children:[e.jsx(A,{size:15,className:"mr-2 stroke-slate-500"}),e.jsx("span",{className:"sr-only",children:"Search"}),e.jsx("input",{type:"text",className:"w-full flex-1 bg-inherit text-sm focus-visible:outline-none",placeholder:"Search chat...",value:m,onChange:s=>v(s.target.value)})]})]}),e.jsx("div",{className:"-mx-3 h-full overflow-auto p-3",children:y.map(s=>{const{id:a,profile:r,username:h,messages:z,fullName:S}=s,o=z[0],k=o.sender==="You"?`You: ${o.message}`:o.message;return e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:n("-mx-1 flex w-full rounded-md px-2 py-2 text-left text-sm hover:bg-secondary/75",t.id===a&&"sm:bg-muted"),onClick:()=>{w(s),x(s)},children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{children:[e.jsx(p,{src:r,alt:h}),e.jsx(g,{children:h})]}),e.jsxs("div",{children:[e.jsx("span",{className:"col-start-2 row-span-2 font-medium",children:S}),e.jsx("span",{className:"col-start-2 row-span-2 row-start-2 line-clamp-2 text-ellipsis text-muted-foreground",children:k})]})]})}),e.jsx(I,{className:"my-1"})]},a)})})]}),e.jsxs("div",{className:n("absolute inset-0 left-full z-50 flex w-full flex-1 flex-col rounded-md border bg-primary-foreground shadow-sm transition-all duration-200 sm:static sm:z-auto sm:flex",b&&"left-0"),children:[e.jsxs("div",{className:"mb-1 flex flex-none justify-between rounded-t-md bg-secondary p-4 shadow-lg",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{size:"icon",variant:"ghost",className:"-ml-2 h-full sm:hidden",onClick:()=>x(null),children:e.jsx(P,{})}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[e.jsxs(f,{className:"size-9 lg:size-11",children:[e.jsx(p,{src:t.profile,alt:t.username}),e.jsx(g,{children:t.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"col-start-2 row-span-2 text-sm font-medium lg:text-base",children:t.fullName}),e.jsx("span",{className:"col-start-2 row-span-2 row-start-2 line-clamp-1 block max-w-32 text-ellipsis text-nowrap text-xs text-muted-foreground lg:max-w-none lg:text-sm",children:t.title})]})]})]}),e.jsxs("div",{className:"-mr-1 flex items-center gap-1 lg:gap-2",children:[e.jsx(l,{size:"icon",variant:"ghost",className:"hidden size-8 rounded-full sm:inline-flex lg:size-10",children:e.jsx(B,{size:22,className:"stroke-muted-foreground"})}),e.jsx(l,{size:"icon",variant:"ghost",className:"hidden size-8 rounded-full sm:inline-flex lg:size-10",children:e.jsx(T,{size:22,className:"stroke-muted-foreground"})}),e.jsx(l,{size:"icon",variant:"ghost",className:"h-10 rounded-md sm:h-8 sm:w-4 lg:h-10 lg:w-6",children:e.jsx(U,{className:"stroke-muted-foreground sm:size-5"})})]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 rounded-md px-4 pb-4 pt-0",children:[e.jsx("div",{className:"flex size-full flex-1",children:e.jsx("div",{className:"chat-text-container relative -mr-4 flex flex-1 flex-col overflow-y-hidden",children:e.jsx("div",{className:"chat-flex flex h-40 w-full flex-grow flex-col-reverse justify-start gap-4 overflow-y-auto py-2 pb-4 pr-4",children:i&&Object.keys(i).map(s=>e.jsxs(e.Fragment,{children:[i[s].map((a,r)=>e.jsxs("div",{className:n("chat-box max-w-72 break-words px-3 py-2 shadow-lg",a.sender==="You"?"self-end rounded-[16px_16px_0_16px] bg-primary/85 text-primary-foreground/75":"self-start rounded-[16px_16px_16px_0] bg-secondary"),children:[a.message," ",e.jsx("span",{className:n("mt-1 block text-xs font-light italic text-muted-foreground",a.sender==="You"&&"text-right"),children:u(a.timestamp).format("h:mm a")})]},`${a.sender}-${a.timestamp}-${r}`)),e.jsx("div",{className:"text-center text-xs",children:s})]},s))})})}),e.jsxs("form",{className:"flex w-full flex-none gap-2",children:[e.jsxs("div",{className:"flex flex-1 items-center gap-2 rounded-md border border-input px-2 py-1 focus-within:outline-none focus-within:ring-1 focus-within:ring-ring lg:gap-4",children:[e.jsxs("div",{className:"space-x-1",children:[e.jsx(l,{size:"icon",type:"button",variant:"ghost",className:"h-8 rounded-md",children:e.jsx($,{size:20,className:"stroke-muted-foreground"})}),e.jsx(l,{size:"icon",type:"button",variant:"ghost",className:"hidden h-8 rounded-md lg:inline-flex",children:e.jsx(E,{size:20,className:"stroke-muted-foreground"})}),e.jsx(l,{size:"icon",type:"button",variant:"ghost",className:"hidden h-8 rounded-md lg:inline-flex",children:e.jsx(F,{size:20,className:"stroke-muted-foreground"})})]}),e.jsxs("label",{className:"flex-1",children:[e.jsx("span",{className:"sr-only",children:"Chat Text Box"}),e.jsx("input",{type:"text",placeholder:"Type your messages...",className:"h-8 w-full bg-inherit focus-visible:outline-none"})]}),e.jsx(l,{variant:"ghost",size:"icon",className:"hidden sm:inline-flex",children:e.jsx(N,{size:20})})]}),e.jsx(l,{className:"h-full sm:hidden",rightSection:e.jsx(N,{size:18}),children:"Send"})]})]})]})]})})]})}export{le as default};
